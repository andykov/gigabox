$(document).ready(function(){$(".js-phone").mask("(999) 999-99-99"),$('[type="checkbox"]').on("click",function(){$(this).prop("checked")?$(this).closest("form").find('[type="submit"]').attr("disabled",!1):$(this).closest("form").find('[type="submit"]').attr("disabled",!0)}),$("form").on("submit",function(e){e.preventDefault();var r=$(this),n=r.find('[type="submit"]'),i=r.find(".form-loader");$.ajax({url:"handler.php",type:"POST",scriptCharset:"utf-8",data:r.serialize(),beforeSend:function(){n.attr("disabled",!0).css("margin-bottom","20px"),i.fadeIn()},success:function(e){if(e=JSON.parse(e),i.fadeOut(),r.find("input").not('[name="clientPhoneCode"], [type="hidden"]').val(""),n.attr("disabled",!1),!0===e.file_have){var t=document.createElement("a");t.setAttribute("href",e.file),t.setAttribute("download",r.find('input[name="download"]').val()),t.click()}else 0<e.file_error.length&&r.find(".form-error").fadeIn().find(".form-error__text").text(e.file_error)},error:function(){console.log("ajax_error"),i.fadeOut(300,function(){}),n.attr("disabled",!1)}})})});